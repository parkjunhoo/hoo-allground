import { getSchema } from '@tiptap/core';
import { DOMSerializer, Node, DOMParser } from 'prosemirror-model';
import { createHTMLDocument, parseHTML } from 'hostic-dom';

function getHTMLFromFragment(doc, schema) {
    return DOMSerializer
        .fromSchema(schema)
        .serializeFragment(doc.content, {
        document: createHTMLDocument(),
    })
        // @ts-ignore
        .render();
}

function generateHTML(doc, extensions) {
    const schema = getSchema(extensions);
    const contentNode = Node.fromJSON(schema, doc);
    return getHTMLFromFragment(contentNode, schema);
}

function generateJSON(html, extensions) {
    const schema = getSchema(extensions);
    const dom = parseHTML(html);
    return DOMParser.fromSchema(schema)
        .parse(dom)
        .toJSON();
}

export { generateHTML, generateJSON };
//# sourceMappingURL=tiptap-html.esm.js.map
